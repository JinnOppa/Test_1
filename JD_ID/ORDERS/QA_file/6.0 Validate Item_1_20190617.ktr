<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>6.0 Validate Item</name>
    <description>update item validation result</description>
    <extended_description />
    <trans_version />
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>/</directory>
    <parameters>
    </parameters>
    <log>
      <trans-log-table>
        <connection />
        <schema />
        <table />
        <size_limit_lines />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STATUS</id>
          <enabled>Y</enabled>
          <name>STATUS</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
          <subject />
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
          <subject />
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
          <subject />
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
          <subject />
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
          <subject />
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>STARTDATE</id>
          <enabled>Y</enabled>
          <name>STARTDATE</name>
        </field>
        <field>
          <id>ENDDATE</id>
          <enabled>Y</enabled>
          <name>ENDDATE</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>DEPDATE</id>
          <enabled>Y</enabled>
          <name>DEPDATE</name>
        </field>
        <field>
          <id>REPLAYDATE</id>
          <enabled>Y</enabled>
          <name>REPLAYDATE</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>Y</enabled>
          <name>LOG_FIELD</name>
        </field>
        <field>
          <id>EXECUTING_SERVER</id>
          <enabled>N</enabled>
          <name>EXECUTING_SERVER</name>
        </field>
        <field>
          <id>EXECUTING_USER</id>
          <enabled>N</enabled>
          <name>EXECUTING_USER</name>
        </field>
        <field>
          <id>CLIENT</id>
          <enabled>N</enabled>
          <name>CLIENT</name>
        </field>
      </trans-log-table>
      <perf-log-table>
        <connection />
        <schema />
        <table />
        <interval />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>SEQ_NR</id>
          <enabled>Y</enabled>
          <name>SEQ_NR</name>
        </field>
        <field>
          <id>LOGDATE</id>
          <enabled>Y</enabled>
          <name>LOGDATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>INPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>INPUT_BUFFER_ROWS</name>
        </field>
        <field>
          <id>OUTPUT_BUFFER_ROWS</id>
          <enabled>Y</enabled>
          <name>OUTPUT_BUFFER_ROWS</name>
        </field>
      </perf-log-table>
      <channel-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>LOGGING_OBJECT_TYPE</id>
          <enabled>Y</enabled>
          <name>LOGGING_OBJECT_TYPE</name>
        </field>
        <field>
          <id>OBJECT_NAME</id>
          <enabled>Y</enabled>
          <name>OBJECT_NAME</name>
        </field>
        <field>
          <id>OBJECT_COPY</id>
          <enabled>Y</enabled>
          <name>OBJECT_COPY</name>
        </field>
        <field>
          <id>REPOSITORY_DIRECTORY</id>
          <enabled>Y</enabled>
          <name>REPOSITORY_DIRECTORY</name>
        </field>
        <field>
          <id>FILENAME</id>
          <enabled>Y</enabled>
          <name>FILENAME</name>
        </field>
        <field>
          <id>OBJECT_ID</id>
          <enabled>Y</enabled>
          <name>OBJECT_ID</name>
        </field>
        <field>
          <id>OBJECT_REVISION</id>
          <enabled>Y</enabled>
          <name>OBJECT_REVISION</name>
        </field>
        <field>
          <id>PARENT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>PARENT_CHANNEL_ID</name>
        </field>
        <field>
          <id>ROOT_CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>ROOT_CHANNEL_ID</name>
        </field>
      </channel-log-table>
      <step-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>TRANSNAME</id>
          <enabled>Y</enabled>
          <name>TRANSNAME</name>
        </field>
        <field>
          <id>STEPNAME</id>
          <enabled>Y</enabled>
          <name>STEPNAME</name>
        </field>
        <field>
          <id>STEP_COPY</id>
          <enabled>Y</enabled>
          <name>STEP_COPY</name>
        </field>
        <field>
          <id>LINES_READ</id>
          <enabled>Y</enabled>
          <name>LINES_READ</name>
        </field>
        <field>
          <id>LINES_WRITTEN</id>
          <enabled>Y</enabled>
          <name>LINES_WRITTEN</name>
        </field>
        <field>
          <id>LINES_UPDATED</id>
          <enabled>Y</enabled>
          <name>LINES_UPDATED</name>
        </field>
        <field>
          <id>LINES_INPUT</id>
          <enabled>Y</enabled>
          <name>LINES_INPUT</name>
        </field>
        <field>
          <id>LINES_OUTPUT</id>
          <enabled>Y</enabled>
          <name>LINES_OUTPUT</name>
        </field>
        <field>
          <id>LINES_REJECTED</id>
          <enabled>Y</enabled>
          <name>LINES_REJECTED</name>
        </field>
        <field>
          <id>ERRORS</id>
          <enabled>Y</enabled>
          <name>ERRORS</name>
        </field>
        <field>
          <id>LOG_FIELD</id>
          <enabled>N</enabled>
          <name>LOG_FIELD</name>
        </field>
      </step-log-table>
      <metrics-log-table>
        <connection />
        <schema />
        <table />
        <timeout_days />
        <field>
          <id>ID_BATCH</id>
          <enabled>Y</enabled>
          <name>ID_BATCH</name>
        </field>
        <field>
          <id>CHANNEL_ID</id>
          <enabled>Y</enabled>
          <name>CHANNEL_ID</name>
        </field>
        <field>
          <id>LOG_DATE</id>
          <enabled>Y</enabled>
          <name>LOG_DATE</name>
        </field>
        <field>
          <id>METRICS_DATE</id>
          <enabled>Y</enabled>
          <name>METRICS_DATE</name>
        </field>
        <field>
          <id>METRICS_CODE</id>
          <enabled>Y</enabled>
          <name>METRICS_CODE</name>
        </field>
        <field>
          <id>METRICS_DESCRIPTION</id>
          <enabled>Y</enabled>
          <name>METRICS_DESCRIPTION</name>
        </field>
        <field>
          <id>METRICS_SUBJECT</id>
          <enabled>Y</enabled>
          <name>METRICS_SUBJECT</name>
        </field>
        <field>
          <id>METRICS_TYPE</id>
          <enabled>Y</enabled>
          <name>METRICS_TYPE</name>
        </field>
        <field>
          <id>METRICS_VALUE</id>
          <enabled>Y</enabled>
          <name>METRICS_VALUE</name>
        </field>
      </metrics-log-table>
    </log>
    <maxdate>
      <connection />
      <table />
      <field />
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file />
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
      <slaveserver>
        <name>DEV PDI SERVER</name>
        <hostname>3.244.5.110</hostname>
        <port>9080</port>
        <webAppName>pentaho-di</webAppName>
        <username>joe</username>
        <password>Encrypted 2be98afc86aa7f2e4bb18bd63c99dbdde</password>
        <proxy_hostname />
        <proxy_port />
        <non_proxy_hosts />
        <master>Y</master>
        <sslMode>N</sslMode>
      </slaveserver>
      <slaveserver>
        <name>Main PDI Server</name>
        <hostname>3.244.4.4</hostname>
        <port>9080</port>
        <webAppName />
        <username>admin</username>
        <password>Encrypted 2be98afc86aa7f2e4cb79bd75dd80aace</password>
        <proxy_hostname />
        <proxy_port />
        <non_proxy_hosts />
        <master>Y</master>
        <sslMode>N</sslMode>
      </slaveserver>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
    <created_user>admin</created_user>
    <created_date>2013/06/18 17:46:47.221</created_date>
    <modified_user>tinghui.tan</modified_user>
    <modified_date>2014/05/14 12:33:39.336</modified_date>
    <key_for_session_key>H4sIAAAAAAAAAAMAAAAAAAAAAAA=</key_for_session_key>
    <is_key_private>N</is_key_private>
  </info>
  <notepads>
    <notepad>
      <note>For both Item Validation:
Items provided by buyer was checked
for it's existence and whether it's price
is the same with the one in item_master.</note>
      <xloc>630</xloc>
      <yloc>120</yloc>
      <width>245</width>
      <heigth>70</heigth>
      <fontname>Arial</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>165</backgroundcolorgreen>
      <backgroundcolorblue>0</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <connection>
    <name>im_staging</name>
    <server>3.244.4.184</server>
    <type>MYSQL</type>
    <access>Native</access>
    <database>im_staging</database>
    <port>3306</port>
    <username>im_staging</username>
    <password>Encrypted 2be98afc86aa7f2e4cb1bfc728ecbfe88</password>
    <servername />
    <data_tablespace />
    <index_tablespace />
    <attributes>
      <attribute>
        <code>EXTRA_OPTION_MYSQL.defaultFetchSize</code>
        <attribute>500</attribute>
      </attribute>
      <attribute>
        <code>EXTRA_OPTION_MYSQL.rewriteBatchedStatements</code>
        <attribute>true</attribute>
      </attribute>
      <attribute>
        <code>EXTRA_OPTION_MYSQL.useCursorFetch</code>
        <attribute>true</attribute>
      </attribute>
      <attribute>
        <code>EXTRA_OPTION_MYSQL.useServerPrepStmts</code>
        <attribute>false</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_LOWERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>FORCE_IDENTIFIERS_TO_UPPERCASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>IS_CLUSTERED</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>PORT_NUMBER</code>
        <attribute>3306</attribute>
      </attribute>
      <attribute>
        <code>PRESERVE_RESERVED_WORD_CASE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>QUOTE_ALL_FIELDS</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>STREAM_RESULTS</code>
        <attribute>Y</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_BOOLEAN_DATA_TYPE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>SUPPORTS_TIMESTAMP_DATA_TYPE</code>
        <attribute>N</attribute>
      </attribute>
      <attribute>
        <code>USE_POOLING</code>
        <attribute>N</attribute>
      </attribute>
    </attributes>
  </connection>
  <order>
    <hop>
      <from>Merge Join</from>
      <to>Change metadata</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>jd_id_orders_detail</from>
      <to>use_buyer_item_code_mapping?</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>indomaret_indo_orders_item_mapping</from>
      <to>Merge Join</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>use_buyer_item_code_mapping?</from>
      <to>Sort rows 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>indomaret_indo_orders_item_mapping</from>
      <to>Sort rows</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sort rows 2</from>
      <to>Merge Join 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sort rows</from>
      <to>Merge Join 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Item Validation</from>
      <to>Update</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Change metadata</from>
      <to>If field value is null</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>If field value is null</from>
      <to>Calculator</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Replace in string</from>
      <to>Item Validation</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calculator</from>
      <to>Change metadata 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Change metadata 3</from>
      <to>Replace in string</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Change metadata 2</from>
      <to>If field value is null 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>If field value is null 2</from>
      <to>Calculator 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Calculator 2</from>
      <to>Change metadata 3 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Replace in string 2</from>
      <to>Item Validation 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Change metadata 3 2</from>
      <to>Replace in string 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Merge Join 2</from>
      <to>Change metadata 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Item Validation 2</from>
      <to>Update 2</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>use_buyer_item_code_mapping?</from>
      <to>Sort rows 3</to>
      <enabled>Y</enabled>
    </hop>
    <hop>
      <from>Sort rows 3</from>
      <to>Merge Join</to>
      <enabled>Y</enabled>
    </hop>
  </order>
  <step>
    <name>Calculator</name>
    <type>Calculator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <calculation>
      <field_name>po_case_price</field_name>
      <calc_type>MULTIPLY</calc_type>
      <field_a>quantity</field_a>
      <field_b>po_unit_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>catalog_case_price</field_name>
      <calc_type>MULTIPLY</calc_type>
      <field_a>quantity</field_a>
      <field_b>unit_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>tolerance_amount</field_name>
      <calc_type>SUBTRACT</calc_type>
      <field_a>po_case_price</field_a>
      <field_b>catalog_case_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>order_quantity</field_name>
      <calc_type>DIVIDE</calc_type>
      <field_a>quantity</field_a>
      <field_b>trading_quantity</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>752</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Calculator 2</name>
    <type>Calculator</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <calculation>
      <field_name>po_case_price</field_name>
      <calc_type>MULTIPLY</calc_type>
      <field_a>quantity</field_a>
      <field_b>po_unit_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>catalog_case_price</field_name>
      <calc_type>MULTIPLY</calc_type>
      <field_a>quantity</field_a>
      <field_b>unit_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>tolerance_amount</field_name>
      <calc_type>SUBTRACT</calc_type>
      <field_a>po_case_price</field_a>
      <field_b>catalog_case_price</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <calculation>
      <field_name>order_quantity</field_name>
      <calc_type>DIVIDE</calc_type>
      <field_a>quantity</field_a>
      <field_b>trading_quantity</field_b>
      <field_c />
      <value_type>Number</value_type>
      <value_length>-1</value_length>
      <value_precision>-1</value_precision>
      <remove>N</remove>
      <conversion_mask />
      <decimal_symbol />
      <grouping_symbol />
      <currency_symbol />
    </calculation>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>144</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Change metadata</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>doc_id</name>
      </field>
      <field>
        <name>sendermailboxid</name>
      </field>
      <field>
        <name>receivermailboxid</name>
      </field>
      <field>
        <name>buyerorgid</name>
      </field>
      <field>
        <name>supplierorgid</name>
      </field>
      <field>
        <name>line_item_no</name>
      </field>
      <field>
        <name>item_barcode</name>
      </field>
      <field>
        <name>buyer_item_code</name>
      </field>
      <field>
        <name>supplier_item_code</name>
      </field>
      <field>
        <name>po_unit_price</name>
      </field>
      <field>
        <name>quantity</name>
      </field>
      <field>
        <name>validation_result</name>
      </field>
      <field>
        <name>check_item_availability</name>
      </field>
      <field>
        <name>check_item_barcode</name>
      </field>
      <field>
        <name>check_item_desc</name>
      </field>
      <field>
        <name>check_supplier_item_code</name>
      </field>
      <field>
        <name>check_item_price</name>
      </field>
      <field>
        <name>check_item_uom</name>
      </field>
      <field>
        <name>check_unit_per_carton</name>
      </field>
      <field>
        <name>use_buyer_item_code_mapping</name>
      </field>
      <field>
        <name>check_minimum_order_quantity</name>
      </field>
      <field>
        <name>check_gst_rate</name>
      </field>
      <field>
        <name>use_gst_rate</name>
      </field>
      <field>
        <name>po_id</name>
      </field>
      <field>
        <name>gtin</name>
      </field>
      <field>
        <name>consumer_unit_ean</name>
      </field>
      <field>
        <name>item_id</name>
      </field>
      <field>
        <name>item_code</name>
      </field>
      <field>
        <name>item_name</name>
      </field>
      <field>
        <name>description</name>
      </field>
      <field>
        <name>trading_uom</name>
      </field>
      <field>
        <name>packaging_uom</name>
      </field>
      <field>
        <name>supplier_item_code_1</name>
      </field>
      <field>
        <name>supplier_item_sub_code</name>
      </field>
      <field>
        <name>buyer_item_code_1</name>
      </field>
      <field>
        <name>buyer_uom</name>
      </field>
      <field>
        <name>uom</name>
      </field>
      <field>
        <name>buyer_uom_method</name>
      </field>
      <field>
        <name>buyer_uom_factor</name>
      </field>
      <field>
        <name>brand</name>
      </field>
      <field>
        <name>unit_price</name>
      </field>
      <field>
        <name>list_price</name>
      </field>
      <field>
        <name>trading_quantity</name>
      </field>
      <field>
        <name>packaging_quantity</name>
      </field>
      <field>
        <name>new_unit_price</name>
      </field>
      <field>
        <name>selling_price</name>
      </field>
      <field>
        <name>adjust_price_enable</name>
      </field>
      <field>
        <name>adjust_price_percentage</name>
      </field>
      <field>
        <name>adjust_item_code_enable</name>
      </field>
      <field>
        <name>adjust_price_enable2</name>
      </field>
      <field>
        <name>adjust_price_percentage2</name>
      </field>
      <field>
        <name>price_tolerance_percentage</name>
      </field>
      <field>
        <name>price_tolerance_amount</name>
      </field>
      <field>
        <name>new_min_ord_qty</name>
      </field>
      <field>
        <name>min_ord_qty_enable</name>
      </field>
      <field>
        <name>unit_per_carton</name>
      </field>
      <field>
        <name>unit_per_sub_carton</name>
      </field>
      <field>
        <name>special_packaging</name>
      </field>
      <field>
        <name>product_group_id</name>
      </field>
      <field>
        <name>type</name>
      </field>
      <field>
        <name>buyer_org_id</name>
      </field>
      <field>
        <name>item_status</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>po_unit_price</name>
        <rename>po_unit_price</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>unit_price</name>
        <rename>unit_price</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>trading_quantity</name>
        <rename>trading_quantity</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask />
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>quantity</name>
        <rename>quantity</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask />
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>610</xloc>
      <yloc>50</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Change metadata 2</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <name>doc_id</name>
      </field>
      <field>
        <name>sendermailboxid</name>
      </field>
      <field>
        <name>receivermailboxid</name>
      </field>
      <field>
        <name>buyerorgid</name>
      </field>
      <field>
        <name>supplierorgid</name>
      </field>
      <field>
        <name>line_item_no</name>
      </field>
      <field>
        <name>item_barcode</name>
      </field>
      <field>
        <name>buyer_item_code</name>
      </field>
      <field>
        <name>supplier_item_code</name>
      </field>
      <field>
        <name>po_unit_price</name>
      </field>
      <field>
        <name>quantity</name>
      </field>
      <field>
        <name>validation_result</name>
      </field>
      <field>
        <name>check_item_availability</name>
      </field>
      <field>
        <name>check_item_barcode</name>
      </field>
      <field>
        <name>check_item_desc</name>
      </field>
      <field>
        <name>check_supplier_item_code</name>
      </field>
      <field>
        <name>check_item_price</name>
      </field>
      <field>
        <name>check_item_uom</name>
      </field>
      <field>
        <name>check_unit_per_carton</name>
      </field>
      <field>
        <name>use_buyer_item_code_mapping</name>
      </field>
      <field>
        <name>check_minimum_order_quantity</name>
      </field>
      <field>
        <name>check_gst_rate</name>
      </field>
      <field>
        <name>use_gst_rate</name>
      </field>
      <field>
        <name>po_id</name>
      </field>
      <field>
        <name>gtin</name>
      </field>
      <field>
        <name>consumer_unit_ean</name>
      </field>
      <field>
        <name>item_id</name>
      </field>
      <field>
        <name>item_code</name>
      </field>
      <field>
        <name>item_name</name>
      </field>
      <field>
        <name>description</name>
      </field>
      <field>
        <name>trading_uom</name>
      </field>
      <field>
        <name>packaging_uom</name>
      </field>
      <field>
        <name>supplier_item_code_1</name>
      </field>
      <field>
        <name>supplier_item_sub_code</name>
      </field>
      <field>
        <name>buyer_item_code_1</name>
      </field>
      <field>
        <name>buyer_uom</name>
      </field>
      <field>
        <name>uom</name>
      </field>
      <field>
        <name>buyer_uom_method</name>
      </field>
      <field>
        <name>buyer_uom_factor</name>
      </field>
      <field>
        <name>brand</name>
      </field>
      <field>
        <name>unit_price</name>
      </field>
      <field>
        <name>list_price</name>
      </field>
      <field>
        <name>trading_quantity</name>
      </field>
      <field>
        <name>packaging_quantity</name>
      </field>
      <field>
        <name>new_unit_price</name>
      </field>
      <field>
        <name>selling_price</name>
      </field>
      <field>
        <name>adjust_price_enable</name>
      </field>
      <field>
        <name>adjust_price_percentage</name>
      </field>
      <field>
        <name>adjust_item_code_enable</name>
      </field>
      <field>
        <name>adjust_price_enable2</name>
      </field>
      <field>
        <name>adjust_price_percentage2</name>
      </field>
      <field>
        <name>price_tolerance_percentage</name>
      </field>
      <field>
        <name>price_tolerance_amount</name>
      </field>
      <field>
        <name>new_min_ord_qty</name>
      </field>
      <field>
        <name>min_ord_qty_enable</name>
      </field>
      <field>
        <name>unit_per_carton</name>
      </field>
      <field>
        <name>unit_per_sub_carton</name>
      </field>
      <field>
        <name>special_packaging</name>
      </field>
      <field>
        <name>product_group_id</name>
      </field>
      <field>
        <name>type</name>
      </field>
      <field>
        <name>buyer_org_id</name>
      </field>
      <field>
        <name>item_status</name>
      </field>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>po_unit_price</name>
        <rename>po_unit_price</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>unit_price</name>
        <rename>unit_price</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
      <meta>
        <name>trading_quantity</name>
        <rename>trading_quantity</rename>
        <type>Number</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask />
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>320</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Change metadata 3</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>tolerance_amount</name>
        <rename>tolerance_amount</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>832</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Change metadata 3 2</name>
    <type>SelectValues</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <select_unspecified>N</select_unspecified>
      <meta>
        <name>tolerance_amount</name>
        <rename>tolerance_amount</rename>
        <type>String</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>0.0000</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <date_format_locale />
        <date_format_timezone />
        <lenient_string_to_number>false</lenient_string_to_number>
        <encoding />
        <decimal_symbol />
        <grouping_symbol />
        <currency_symbol />
        <storage_type />
      </meta>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>144</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>If field value is null</name>
    <type>IfNull</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <replaceAllByValue />
    <replaceAllMask />
    <selectFields>Y</selectFields>
    <selectValuesType>N</selectValuesType>
    <setEmptyStringAll>N</setEmptyStringAll>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>unit_price</name>
        <value>0.00</value>
        <mask />
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>trading_quantity</name>
        <value>0</value>
        <mask />
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>672</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>If field value is null 2</name>
    <type>IfNull</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <replaceAllByValue />
    <replaceAllMask />
    <selectFields>Y</selectFields>
    <selectValuesType>N</selectValuesType>
    <setEmptyStringAll>N</setEmptyStringAll>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>unit_price</name>
        <value>0.00</value>
        <mask />
        <set_empty_string>N</set_empty_string>
      </field>
      <field>
        <name>trading_quantity</name>
        <value>0</value>
        <mask />
        <set_empty_string>N</set_empty_string>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>224</xloc>
      <yloc>288</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Item Validation</name>
    <type>UserDefinedJavaClass</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <definitions>
      <definition>
        <class_type>TRANSFORM_CLASS</class_type>
        <class_name>Processor</class_name>
        <class_source>public boolean processRow(StepMetaInterface smi, StepDataInterface sdi) throws KettleException
{
	Object[] r = getRow();
	if (r == null) {
		setOutputDone();
		return false;
	}

	// It is always safest to call createOutputRow() to ensure that your output row's Object[] is large
    // enough to handle any new fields you are creating in this step.
    
	r = createOutputRow(r, data.outputRowMeta.size());

	long new_validation_result=0;

	// setting for checking
	Long checkItemAvailability = get(Fields.In, "check_item_availability").getInteger(r);
	Long checkItemBarcode = get(Fields.In, "check_item_barcode").getInteger(r);
	Long checkItemDesc = get(Fields.In, "check_item_desc").getInteger(r);
	Long checkSupplierItemCode = get(Fields.In, "check_supplier_item_code").getInteger(r);
	Long checkItemPrice = get(Fields.In, "check_item_price").getInteger(r);
	Long checkItemUom = get(Fields.In, "check_item_uom").getInteger(r);
	Long checkUnitPerCarton = get(Fields.In, "check_unit_per_carton").getInteger(r);
	Long checkMininumOrderQty = get(Fields.In, "check_minimum_order_quantity").getInteger(r);
	Long checkGstRate = get(Fields.In, "check_gst_rate").getInteger(r);
	Double useGstRate = get(Fields.In, "use_gst_rate").getNumber(r);

	//PO info
	Double netUnitPrice = get(Fields.In, "po_unit_price").getNumber(r);  // each price
	Double netCasePrice = get(Fields.In, "po_case_price").getNumber(r);  // case price
	Double tolerance_amount = get(Fields.In, "tolerance_amount").getNumber(r);
	// item master info
	String consumerUnitEan = get(Fields.In, "consumer_unit_ean").getString(r);
	Double unitPrice = get(Fields.In, "unit_price").getNumber(r);
	Double trading_quantity = get(Fields.In, "trading_quantity").getNumber(r);
	Double order_quantity = get(Fields.In, "order_quantity").getNumber(r);
	String supplierorgid = get(Fields.In, "supplierorgid").getString(r);	
	
    

	//logBasic("**" +netUnitPrice +"**" +unitPrice +"**" +(unitPrice == netUnitPrice));

	if(checkItemAvailability==0 &amp;&amp; checkItemBarcode==0 &amp;&amp; checkItemDesc==0 &amp;&amp;
		checkSupplierItemCode==0 &amp;&amp; checkItemPrice==0 &amp;&amp; checkItemUom==0){
		new_validation_result = new_validation_result | 0;
	}else{
		if((consumerUnitEan==null || consumerUnitEan.trim().equals("")) &amp;&amp; checkItemBarcode==1)
			new_validation_result = new_validation_result | 1;
		else {

		if (trading_quantity!=null &amp;&amp; trading_quantity==0 &amp;&amp; (checkUnitPerCarton==1 || checkUnitPerCarton == 2))
				new_validation_result = new_validation_result | 2;
			
			if(checkItemPrice > 0){
				if(checkItemPrice == 1){
						
					
					if (unitPrice &lt; netUnitPrice &amp;&amp; tolerance_amount > 999)
						new_validation_result = new_validation_result | 4;

					if (unitPrice > netUnitPrice &amp;&amp; tolerance_amount > 999)
						new_validation_result = new_validation_result | 4;
				}
				
			}

	
		if (supplierorgid.equals("UNILEVER_ID") &amp;&amp; order_quantity &lt; 1)
				new_validation_result = new_validation_result | 8;
		}
	}

	get(Fields.Out, "new_validation_result").setValue(r, new_validation_result);
	

	// Send the row on to the next step.
    putRow(data.outputRowMeta, r);

	return true;
}
</class_source>
      </definition>
    </definitions>
    <fields>
      <field>
        <field_name>new_validation_result</field_name>
        <field_type>Integer</field_type>
        <field_length>-1</field_length>
        <field_precision>-1</field_precision>
      </field>
    </fields>
    <clear_result_fields>N</clear_result_fields>
    <info_steps />
    <target_steps />
    <usage_parameters />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>992</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Item Validation 2</name>
    <type>UserDefinedJavaClass</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <definitions>
      <definition>
        <class_type>TRANSFORM_CLASS</class_type>
        <class_name>Processor</class_name>
        <class_source>public boolean processRow(StepMetaInterface smi, StepDataInterface sdi) throws KettleException
{
	Object[] r = getRow();
	if (r == null) {
		setOutputDone();
		return false;
	}

	// It is always safest to call createOutputRow() to ensure that your output row's Object[] is large
    // enough to handle any new fields you are creating in this step.
    
	r = createOutputRow(r, data.outputRowMeta.size());

	long new_validation_result=0;

	// setting for checking
	Long checkItemAvailability = get(Fields.In, "check_item_availability").getInteger(r);
	Long checkItemBarcode = get(Fields.In, "check_item_barcode").getInteger(r);
	Long checkItemDesc = get(Fields.In, "check_item_desc").getInteger(r);
	Long checkSupplierItemCode = get(Fields.In, "check_supplier_item_code").getInteger(r);
	Long checkItemPrice = get(Fields.In, "check_item_price").getInteger(r);
	Long checkItemUom = get(Fields.In, "check_item_uom").getInteger(r);
	Long checkUnitPerCarton = get(Fields.In, "check_unit_per_carton").getInteger(r);
	Long checkMininumOrderQty = get(Fields.In, "check_minimum_order_quantity").getInteger(r);
	Long checkGstRate = get(Fields.In, "check_gst_rate").getInteger(r);
	Double useGstRate = get(Fields.In, "use_gst_rate").getNumber(r);

	//PO info
	Double netUnitPrice = get(Fields.In, "po_unit_price").getNumber(r);  // each price
	Double netCasePrice = get(Fields.In, "po_case_price").getNumber(r);  // case price
	Double tolerance_amount = get(Fields.In, "tolerance_amount").getNumber(r);
	// item master info
	String consumerUnitEan = get(Fields.In, "consumer_unit_ean").getString(r);
	Double unitPrice = get(Fields.In, "unit_price").getNumber(r);
	Double trading_quantity = get(Fields.In, "trading_quantity").getNumber(r);
	Double order_quantity = get(Fields.In, "order_quantity").getNumber(r);
	String supplierorgid = get(Fields.In, "supplierorgid").getString(r);	
	
    

	//logBasic("**" +netUnitPrice +"**" +unitPrice +"**" +(unitPrice == netUnitPrice));

	if(checkItemAvailability==0 &amp;&amp; checkItemBarcode==0 &amp;&amp; checkItemDesc==0 &amp;&amp;
		checkSupplierItemCode==0 &amp;&amp; checkItemPrice==0 &amp;&amp; checkItemUom==0){
		new_validation_result = new_validation_result | 0;
	}else{
		if((consumerUnitEan==null || consumerUnitEan.trim().equals("")) &amp;&amp; checkItemBarcode==1)
			new_validation_result = new_validation_result | 1;
		else {

		if (trading_quantity!=null &amp;&amp; trading_quantity==0 &amp;&amp; (checkUnitPerCarton==1 || checkUnitPerCarton == 2))
				new_validation_result = new_validation_result | 2;
			
			if(checkItemPrice > 0){
				if(checkItemPrice == 1){
						
					
					if (unitPrice &lt; netUnitPrice &amp;&amp; tolerance_amount > 999)
						new_validation_result = new_validation_result | 4;

					if (unitPrice > netUnitPrice &amp;&amp; tolerance_amount > 999)
						new_validation_result = new_validation_result | 4;
				}
				
			}

	
		if (supplierorgid.equals("UNILEVER_ID") &amp;&amp; order_quantity &lt; 1)
				new_validation_result = new_validation_result | 8;
		}
	}

	get(Fields.Out, "new_validation_result").setValue(r, new_validation_result);
	

	// Send the row on to the next step.
    putRow(data.outputRowMeta, r);

	return true;
}
</class_source>
      </definition>
    </definitions>
    <fields>
      <field>
        <field_name>new_validation_result</field_name>
        <field_type>Integer</field_type>
        <field_length>-1</field_length>
        <field_precision>-1</field_precision>
      </field>
    </fields>
    <clear_result_fields>N</clear_result_fields>
    <info_steps />
    <target_steps />
    <usage_parameters />
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>336</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Merge Join</name>
    <type>MergeJoin</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <join_type>LEFT OUTER</join_type>
    <step1>Sort rows 3</step1>
    <step2>indomaret_indo_orders_item_mapping</step2>
    <keys_1>
      <key>supplierorgid</key>
      <key>item_barcode</key>
    </keys_1>
    <keys_2>
      <key>supplier_org_id</key>
      <key>consumer_unit_ean</key>
    </keys_2>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>520</xloc>
      <yloc>50</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Merge Join 2</name>
    <type>MergeJoin</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <join_type>LEFT OUTER</join_type>
    <step1>Sort rows 2</step1>
    <step2>Sort rows</step2>
    <keys_1>
      <key>buyer_item_code</key>
    </keys_1>
    <keys_2>
      <key>buyer_item_code</key>
    </keys_2>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>290</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Replace in string</name>
    <type>ReplaceString</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <in_stream_name>tolerance_amount</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>-</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string />
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>912</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Replace in string 2</name>
    <type>ReplaceString</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <fields>
      <field>
        <in_stream_name>tolerance_amount</in_stream_name>
        <out_stream_name />
        <use_regex>no</use_regex>
        <replace_string>-</replace_string>
        <replace_by_string />
        <set_empty_string>N</set_empty_string>
        <replace_field_by_string />
        <whole_word>no</whole_word>
        <case_sensitive>no</case_sensitive>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>240</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sort rows</name>
    <type>SortRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory />
    <compress>N</compress>
    <compress_variable />
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>supplier_org_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
      <field>
        <name>buyer_item_code</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>2</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>520</xloc>
      <yloc>290</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sort rows 2</name>
    <type>SortRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory />
    <compress>N</compress>
    <compress_variable />
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>supplierorgid</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
      <field>
        <name>buyer_item_code</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>2</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>170</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Sort rows 3</name>
    <type>SortRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <directory>%%java.io.tmpdir%%</directory>
    <prefix>out</prefix>
    <sort_size>1000000</sort_size>
    <free_memory />
    <compress>N</compress>
    <compress_variable />
    <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>supplierorgid</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
      <field>
        <name>item_barcode</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
        <collator_enabled>N</collator_enabled>
        <collator_strength>0</collator_strength>
        <presorted>N</presorted>
      </field>
    </fields>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>464</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Update</name>
    <type>Update</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>im_staging</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <use_batch>N</use_batch>
    <error_ignored>N</error_ignored>
    <ignore_flag_field />
    <lookup>
      <schema />
      <table>jd_id_orders_detail</table>
      <key>
        <name>doc_id</name>
        <field>doc_id</field>
        <condition>=</condition>
        <name2 />
      </key>
      <key>
        <name>item_barcode</name>
        <field>supplier_item_code</field>
        <condition>=</condition>
        <name2 />
      </key>
      <value>
        <name>validation_result</name>
        <rename>new_validation_result</rename>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>1104</xloc>
      <yloc>48</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>Update 2</name>
    <type>Update</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>im_staging</connection>
    <skip_lookup>N</skip_lookup>
    <commit>100</commit>
    <use_batch>N</use_batch>
    <error_ignored>N</error_ignored>
    <ignore_flag_field />
    <lookup>
      <schema />
      <table>jd_id_orders_detail</table>
      <key>
        <name>doc_id</name>
        <field>doc_id</field>
        <condition>=</condition>
        <name2 />
      </key>
      <key>
        <name>buyer_item_code</name>
        <field>buyer_item_code</field>
        <condition>=</condition>
        <name2 />
      </key>
      <value>
        <name>validation_result</name>
        <rename>new_validation_result</rename>
      </value>
    </lookup>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>432</xloc>
      <yloc>368</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>indomaret_indo_orders_item_mapping</name>
    <type>TableInput</type>
    <description />
    <distribute>N</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>im_staging</connection>
    <sql>SELECT
  po_id
, gtin
, consumer_unit_ean
, item_id
, item_code
, item_name
, description
, trading_uom
, packaging_uom
, supplier_item_code
, supplier_item_sub_code
, buyer_item_code
, buyer_uom
, uom
, buyer_uom_method
, buyer_uom_factor
, brand
, unit_price
, list_price
, trading_quantity
, packaging_quantity
, new_unit_price
, selling_price
, adjust_price_enable
, adjust_price_percentage
, adjust_item_code_enable
, adjust_price_enable2
, adjust_price_percentage2
, price_tolerance_percentage
, price_tolerance_amount
, new_min_ord_qty
, min_ord_qty_enable
, unit_per_carton
, unit_per_sub_carton
, special_packaging
, product_group_id
, type
, buyer_org_id
, item_status
, supplier_org_id
FROM jd_id_orders_item_mapping
ORDER BY supplier_org_id,consumer_unit_ean
</sql>
    <limit>0</limit>
    <lookup />
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>520</xloc>
      <yloc>170</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>jd_id_orders_detail</name>
    <type>TableInput</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <connection>im_staging</connection>
    <sql>SELECT
  th.doc_id
, th.sendermailboxid
, th.receivermailboxid
, th.buyerorgid
, th.supplierorgid
, td.line_item_no
, td.supplier_item_code as item_barcode
, td.buyer_item_code
, td.supplier_item_code
, td.unit_price as po_unit_price
, td.quantity
, td.validation_result
, ioc.check_item_availability
, ioc.check_item_barcode
, ioc.check_item_desc
, ioc.check_supplier_item_code
, ioc.check_item_price
, ioc.check_item_uom
, ioc.check_unit_per_carton
, ioc.use_buyer_item_code_mapping
, ioc.check_minimum_order_quantity
, ioc.check_gst_rate
, ioc.use_gst_rate
FROM jd_id_orders_detail td
INNER JOIN jd_id_orders_header th ON th.doc_id=td.doc_id
INNER JOIN im_orders_config ioc on th.sendermailboxid=ioc.buyer_id and th.receivermailboxid=ioc.supplier_id
ORDER BY th.supplierorgid, td.item_barcode</sql>
    <limit>0</limit>
    <lookup />
    <execute_each_row>N</execute_each_row>
    <variables_active>N</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>250</xloc>
      <yloc>50</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step>
    <name>use_buyer_item_code_mapping?</name>
    <type>FilterRows</type>
    <description />
    <distribute>Y</distribute>
    <custom_distribution />
    <copies>1</copies>
    <partitioning>
      <method>none</method>
      <schema_name />
    </partitioning>
    <send_true_to>Sort rows 2</send_true_to>
    <send_false_to>Sort rows 3</send_false_to>
    <compare>
      <condition>
        <negated>N</negated>
        <leftvalue>use_buyer_item_code_mapping</leftvalue>
        <function>=</function>
        <rightvalue />
        <value>
          <name>constant</name>
          <type>Integer</type>
          <text>1</text>
          <length>-1</length>
          <precision>0</precision>
          <isnull>N</isnull>
          <mask>#;-#</mask>
        </value>
      </condition>
    </compare>
    <cluster_schema />
    <remotesteps>
      <input>
      </input>
      <output>
      </output>
    </remotesteps>
    <GUI>
      <xloc>400</xloc>
      <yloc>50</yloc>
      <draw>Y</draw>
    </GUI>
  </step>
  <step_error_handling>
  </step_error_handling>
  <slave-step-copy-partition-distribution>
  </slave-step-copy-partition-distribution>
  <slave_transformation>N</slave_transformation>
</transformation>
